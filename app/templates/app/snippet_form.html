{% extends "base_generic.html" %}

{% block content %}

<h1>Add Snippet</h1>

<h2>Code:</h2>
<div id="editor" style="height: 500px; width: 100%"></div>

<form action="{% url 'app:snippet-add' %}" method="post">
    {% csrf_token %}
    <span style="display: none;">{{ form.code }}</span>
    <h2><label for="id_language">Language: </label></h2>
    {{ form.language }}
    <h2><label for="id_title">Title: </label></h2>
    {{ form.title }}
    <h2><label for="id_description">Description: </label></h2>
    {{ form.description }}
    <h2><label for="id_starred">Starred: </label></h2>
    {{ form.starred }}
    <h2><label for="id_starred">Tags: </label></h2>
    {{ form.tags }}
    <a href="{% url 'app:tag-add' %}">Add tag</a>
    <input type="submit" value="Submit">
</form>

<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ace.js" integrity="sha512-GZ1RIgZaSc8rnco/8CXfRdCpDxRCphenIiZ2ztLy3XQfCbQUSCuk8IudvNHxkRA3oUg6q0qejgN/qqyG1duv5Q==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ext-modelist.min.js" integrity="sha512-DVhsjVBjwWmU6Tb43nTK5ZhIUVdwOEiKPm8KTk3pE28oN/ZUGCJm7ufcUZq8yo2uYFkNfPZ9aed16cAKEj/2gw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ext-themelist.min.js" integrity="sha512-5CwAfXQtNsk5OzybMAJ3U14TStTq6jUHJoWxu58KOyioLXO3fX6FPUKaYp/2iF6yZMkv38fvh3nH+Vq94R2BUg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script>
    const editor = ace.edit('editor');
    const txt = document.getElementById('id_code');
    editor.setTheme('ace/theme/monokai');
    editor.session.setMode('ace/mode/scheme');
    editor.getSession().on('change', () => {
        txt.value = editor.getSession().getValue();
        console.log(txt.value)
    });
    txt.value = editor.getSession().getValue(); // Initial value set

    console.log(ace.require('ace/ext/themelist'));
    console.log(ace.require('ace/ext/modelist'));
</script>

{% endblock %}

